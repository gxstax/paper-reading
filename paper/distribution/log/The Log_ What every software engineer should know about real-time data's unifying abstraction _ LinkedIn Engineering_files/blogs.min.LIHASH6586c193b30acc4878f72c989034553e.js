_define=define;define=null;
(function(g,e){if("object"===typeof exports&&exports)e(exports);else{var q={};e(q);"function"===typeof define&&define.amd?define("mustache",q):g.Mustache=q}})(this,function(g){function e(c){return c.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")}function q(c){this.tail=this.string=c;this.pos=0}function m(c,b){this.view=c||{};this.parent=b;this._cache={}}function p(){this.clearCache()}function r(c,b,a,f){for(var k="",d,h,e=0,l=c.length;e<l;++e)switch(d=c[e],h=d[1],d[0]){case "#":h=a.lookup(h);if("object"===
typeof h)if(C(h))for(var n=0,u=h.length;n<u;++n)k+=r(d[4],b,a.push(h[n]),f);else h&&(k+=r(d[4],b,a.push(h),f));else"function"===typeof h?(d=null==f?null:f.slice(d[3],d[5]),h=h.call(a.view,d,function(f){return b.render(f,a)}),null!=h&&(k+=h)):h&&(k+=r(d[4],b,a,f));break;case "^":h=a.lookup(h);if(!h||C(h)&&0===h.length)k+=r(d[4],b,a,f);break;case "\x3e":h=b.getPartial(h);"function"===typeof h&&(k+=h(a));break;case "\x26":h=a.lookup(h);null!=h&&(k+=h);break;case "name":h=a.lookup(h);null!=h&&(k+=g.escape(h));
break;case "text":k+=h}return k}function v(c){return[new RegExp(e(c[0])+"\\s*"),new RegExp("\\s*"+e(c[1]))]}var w=/\s*/,t=/\s+/,x=/\S/,y=/\s*=/,E=/\s*\}/,D=/#|\^|\/|>|\{|&|=|!/,z=RegExp.prototype.test,F=Object.prototype.toString,C=Array.isArray||function(c){return"[object Array]"===F.call(c)},d={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#39;","/":"\x26#x2F;"};q.prototype.eos=function(){return""===this.tail};q.prototype.scan=function(c){return(c=this.tail.match(c))&&
0===c.index?(this.tail=this.tail.substring(c[0].length),this.pos+=c[0].length,c[0]):""};q.prototype.scanUntil=function(c){var b=this.tail.search(c);switch(b){case -1:c=this.tail;this.pos+=this.tail.length;this.tail="";break;case 0:c="";break;default:c=this.tail.substring(0,b),this.tail=this.tail.substring(b),this.pos+=b}return c};m.make=function(c){return c instanceof m?c:new m(c)};m.prototype.push=function(c){return new m(c,this)};m.prototype.lookup=function(c){var b=this._cache[c];if(!b){if("."==
c)b=this.view;else for(var a=this;a;){if(0<c.indexOf(".")){b=a.view;for(var f=c.split("."),k=0;b&&k<f.length;)b=b[f[k++]]}else b=a.view[c];if(null!=b)break;a=a.parent}this._cache[c]=b}"function"===typeof b&&(b=b.call(this.view));return b};p.prototype.clearCache=function(){this._cache={};this._partialCache={}};p.prototype.compile=function(c,b){var a=this._cache[c];a||(b=g.parse(c,b),a=this._cache[c]=this.compileTokens(b,c));return a};p.prototype.compilePartial=function(c,b,a){b=this.compile(b,a);return this._partialCache[c]=
b};p.prototype.getPartial=function(c){c in this._partialCache||!this._loadPartial||this.compilePartial(c,this._loadPartial(c));return this._partialCache[c]};p.prototype.compileTokens=function(c,b){var a=this;return function(f,k){if(k)if("function"===typeof k)a._loadPartial=k;else for(var d in k)a.compilePartial(d,k[d]);return r(c,a,m.make(f),b)}};p.prototype.render=function(c,b,a){return this.compile(c)(b,a)};g.name="mustache.js";g.version="0.7.2";g.tags=["{{","}}"];g.Scanner=q;g.Context=m;g.Writer=
p;g.parse=function(c,b){c=c||"";b=b||g.tags;"string"===typeof b&&(b=b.split(t));if(2!==b.length)throw Error("Invalid tags: "+b.join(", "));var a=v(b);c=new q(c);for(var f=[],k=[],d=[],h=!1,B=!1,l,n,u,m;!c.eos();){l=c.pos;if(u=c.scanUntil(a[0])){m=0;for(var r=u.length;m<r;++m)if(n=u.charAt(m),z.call(x,n)?B=!0:d.push(k.length),k.push(["text",n,l,l+1]),l+=1,"\n"==n){if(h&&!B)for(;d.length;)delete k[d.pop()];else d=[];B=h=!1}}if(!c.scan(a[0]))break;h=!0;n=c.scan(D)||"name";c.scan(w);"\x3d"===n?(u=c.scanUntil(y),
c.scan(y),c.scanUntil(a[1])):"{"===n?(u=c.scanUntil(new RegExp("\\s*"+e("}"+b[1]))),c.scan(E),c.scanUntil(a[1]),n="\x26"):u=c.scanUntil(a[1]);if(!c.scan(a[1]))throw Error("Unclosed tag at "+c.pos);m=[n,u,l,c.pos];k.push(m);if("#"===n||"^"===n)f.push(m);else if("/"===n){if(0===f.length)throw Error('Unopened section "'+u+'" at '+l);n=f.pop();if(n[1]!==u)throw Error('Unclosed section "'+n[1]+'" at '+l);}else if("name"===n||"{"===n||"\x26"===n)B=!0;else if("\x3d"===n){b=u.split(t);if(2!==b.length)throw Error("Invalid tags at "+
l+": "+b.join(", "));a=v(b)}}if(n=f.pop())throw Error('Unclosed section "'+n[1]+'" at '+c.pos);b=k;a=[];f=0;for(k=b.length;f<k;++f)if(c=b[f])if("text"===c[0]&&p&&"text"===p[0])p[1]+=c[1],p[3]=c[3];else{var p=c;a.push(c)}p=a;a=b=[];c=[];k=0;for(d=p.length;k<d;++k)switch(f=p[k],f[0]){case "#":case "^":c.push(f);a.push(f);a=f[4]=[];break;case "/":c.pop()[5]=f[2];a=0<c.length?c[c.length-1][4]:b;break;default:a.push(f)}return b};g.escape=function(c){return String(c).replace(/[&<>"'\/]/g,function(b){return d[b]})};
var l=new p;g.clearCache=function(){return l.clearCache()};g.compile=function(c,b){return l.compile(c,b)};g.compilePartial=function(c,b,a){return l.compilePartial(c,b,a)};g.compileTokens=function(c,b){return l.compileTokens(c,b)};g.render=function(c,b,a){return l.render(c,b,a)};g.to_html=function(c,b,a,f){c=g.render(c,b,a);if("function"===typeof f)f(c);else return c}});define=_define;
(function(g){var e=function(){return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(d){return!d||/^\s*$/.test(d)},escapeRegExChars:function(d){return d.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$\x26")},isString:function(d){return"string"===typeof d},isNumber:function(d){return"number"===typeof d},isArray:g.isArray,isFunction:g.isFunction,isObject:g.isPlainObject,isUndefined:function(d){return"undefined"===
typeof d},toStr:function(d){return e.isUndefined(d)||null===d?"":d+""},bind:g.proxy,each:function(d,e){g.each(d,function(c,b){return e(b,c)})},map:g.map,filter:g.grep,every:function(d,e){var c=!0;if(!d)return c;g.each(d,function(b,a){if(!(c=e.call(null,a,b,d)))return!1});return!!c},some:function(d,e){var c=!1;if(!d)return c;g.each(d,function(b,a){if(c=e.call(null,a,b,d))return!1});return!!c},mixin:g.extend,getUniqueId:function(){var d=0;return function(){return d++}}(),templatify:function(d){function e(){return String(d)}
return g.isFunction(d)?d:e},defer:function(d){setTimeout(d,0)},debounce:function(d,e,c){var b,a;return function(){var f=this,k=arguments;var A=c&&!b;clearTimeout(b);b=setTimeout(function(){b=null;c||(a=d.apply(f,k))},e);A&&(a=d.apply(f,k));return a}},throttle:function(d,e){var c,b,a,f;var k=0;var A=function(){k=new Date;a=null;f=d.apply(c,b)};return function(){var h=new Date,g=e-(h-k);c=this;b=arguments;0>=g?(clearTimeout(a),a=null,k=h,f=d.apply(c,b)):a||(a=setTimeout(A,g));return f}},noop:function(){}}}(),
q=function(){function d(b){return(b=e.toStr(b))?b.split(/\s+/):[]}function g(b){return(b=e.toStr(b))?b.split(/\W+/):[]}function c(b){return function(){var a=[].slice.call(arguments,0);return function(f){var c=[];e.each(a,function(a){c=c.concat(b(e.toStr(f[a])))});return c}}}return{nonword:g,whitespace:d,obj:{nonword:c(g),whitespace:c(d)}}}(),m=function(){function d(b){this.maxSize=e.isNumber(b)?b:100;this.reset();0>=this.maxSize&&(this.set=this.get=g.noop)}function l(){this.head=this.tail=null}function c(b,
a){this.key=b;this.val=a;this.prev=this.next=null}e.mixin(d.prototype,{set:function(b,a){var f=this.list.tail;this.size>=this.maxSize&&(this.list.remove(f),delete this.hash[f.key]);(f=this.hash[b])?(f.val=a,this.list.moveToFront(f)):(f=new c(b,a),this.list.add(f),this.hash[b]=f,this.size++)},get:function(b){if(b=this.hash[b])return this.list.moveToFront(b),b.val},reset:function(){this.size=0;this.hash={};this.list=new l}});e.mixin(l.prototype,{add:function(b){this.head&&(b.next=this.head,this.head.prev=
b);this.head=b;this.tail=this.tail||b},remove:function(b){b.prev?b.prev.next=b.next:this.head=b.next;b.next?b.next.prev=b.prev:this.tail=b.prev},moveToFront:function(b){this.remove(b);this.add(b)}});return d}(),p=function(){function d(b){this.prefix=["__",b,"__"].join("");this.ttlKey="__ttl__";this.keyMatcher=new RegExp("^"+e.escapeRegExChars(this.prefix))}function g(b){return JSON.stringify(e.isUndefined(b)?null:b)}try{var c=window.localStorage;c.setItem("~~~","!");c.removeItem("~~~")}catch(b){c=
null}e.mixin(d.prototype,c&&window.JSON?{_prefix:function(b){return this.prefix+b},_ttlKey:function(b){return this._prefix(b)+this.ttlKey},get:function(b){this.isExpired(b)&&this.remove(b);return JSON.parse(c.getItem(this._prefix(b)))},set:function(b,a,f){e.isNumber(f)?c.setItem(this._ttlKey(b),g((new Date).getTime()+f)):c.removeItem(this._ttlKey(b));return c.setItem(this._prefix(b),g(a))},remove:function(b){c.removeItem(this._ttlKey(b));c.removeItem(this._prefix(b));return this},clear:function(){var b,
a,f=[],k=c.length;for(b=0;b<k;b++)(a=c.key(b)).match(this.keyMatcher)&&f.push(a.replace(this.keyMatcher,""));for(b=f.length;b--;)this.remove(f[b]);return this},isExpired:function(b){b=JSON.parse(c.getItem(this._ttlKey(b)));return e.isNumber(b)&&(new Date).getTime()>b?!0:!1}}:{get:e.noop,set:e.noop,remove:e.noop,clear:e.noop,isExpired:e.noop});return d}(),r=function(){function d(a){a=a||{};this.cancelled=!1;this.lastUrl=null;this._send=a.transport?l(a.transport):g.ajax;this._get=a.rateLimiter?a.rateLimiter(this._get):
this._get;this._cache=!1===a.cache?new m(0):f}function l(a){return function(b,f){var c=g.Deferred();a(b,f,function(a){e.defer(function(){c.resolve(a)})},function(a){e.defer(function(){c.reject(a)})});return c}}var c=0,b={},a=6,f=new m(10);d.setMaxPendingRequests=function(b){a=b};d.resetCache=function(){f.reset()};e.mixin(d.prototype,{_get:function(f,d,h){function k(a){h&&h(null,a);g._cache.set(f,a)}function e(){h&&h(!0)}function A(){c--;delete b[f];g.onDeckRequestArgs&&(g._get.apply(g,g.onDeckRequestArgs),
g.onDeckRequestArgs=null)}var g=this,l;this.cancelled||f!==this.lastUrl||((l=b[f])?l.done(k).fail(e):c<a?(c++,b[f]=this._send(f,d).done(k).fail(e).always(A)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(a,b,f){var c;e.isFunction(b)&&(f=b,b={});this.cancelled=!1;this.lastUrl=a;(c=this._cache.get(a))?e.defer(function(){f&&f(null,c)}):this._get(a,b,f);return!!c},cancel:function(){this.cancelled=!0}});return d}(),v=function(){function d(a){a=a||{};a.datumTokenizer&&a.queryTokenizer||
g.error("datumTokenizer and queryTokenizer are both required");this.datumTokenizer=a.datumTokenizer;this.queryTokenizer=a.queryTokenizer;this.reset()}function l(a){a=e.filter(a,function(a){return!!a});return a=e.map(a,function(a){return a.toLowerCase()})}function c(a){for(var b={},c=[],d=0,h=a.length;d<h;d++)b[a[d]]||(b[a[d]]=!0,c.push(a[d]));return c}function b(a,b){function c(a,b){return a-b}var f=0,d=0,e=[];a=a.sort(c);b=b.sort(c);for(var g=a.length,l=b.length;f<g&&d<l;)a[f]<b[d]?f++:(a[f]>b[d]||
(e.push(a[f]),f++),d++);return e}e.mixin(d.prototype,{bootstrap:function(a){this.datums=a.datums;this.trie=a.trie},add:function(a){var b=this;a=e.isArray(a)?a:[a];e.each(a,function(a){var c=b.datums.push(a)-1;a=l(b.datumTokenizer(a));e.each(a,function(a){var f;var d=b.trie;for(a=a.split("");f=a.shift();)d=d.children[f]||(d.children[f]={ids:[],children:{}}),d.ids.push(c)})})},get:function(a){var f=this,d;a=l(this.queryTokenizer(a));e.each(a,function(a){var c;if(d&&0===d.length)return!1;var k=f.trie;
for(a=a.split("");k&&(c=a.shift());)k=k.children[c];if(k&&0===a.length)k=k.ids.slice(0),d=d?b(d,k):k;else return d=[],!1});return d?e.map(c(d),function(a){return f.datums[a]}):[]},reset:function(){this.datums=[];this.trie={ids:[],children:{}}},serialize:function(){return{datums:this.datums,trie:this.trie}}});return d}(),w=function(){return{local:function(d){return d.local||null},prefetch:function(d){var l={url:null,thumbprint:"",ttl:864E5,filter:null,ajax:{}};if(d=d.prefetch||null)d=e.isString(d)?
{url:d}:d,d=e.mixin(l,d),d.thumbprint="0.10.5"+d.thumbprint,d.ajax.type=d.ajax.type||"GET",d.ajax.dataType=d.ajax.dataType||"json",!d.url&&g.error("prefetch requires url to be set");return d},remote:function(d){function l(a){return function(b){return e.debounce(b,a)}}function c(a){return function(b){return e.throttle(b,a)}}var b={url:null,cache:!0,wildcard:"%QUERY",replace:null,rateLimitBy:"debounce",rateLimitWait:300,send:null,filter:null,ajax:{}};if(d=d.remote||null)d=e.isString(d)?{url:d}:d,d=
e.mixin(b,d),d.rateLimiter=/^throttle$/i.test(d.rateLimitBy)?c(d.rateLimitWait):l(d.rateLimitWait),d.ajax.type=d.ajax.type||"GET",d.ajax.dataType=d.ajax.dataType||"json",delete d.rateLimitBy,delete d.rateLimitWait,!d.url&&g.error("remote requires url to be set");return d}}}();(function(d){function l(a){a&&(a.local||a.prefetch||a.remote)||g.error("one of local, prefetch, or remote is required");this.limit=a.limit||5;this.sorter=c(a.sorter);this.dupDetector=a.dupDetector||b;this.local=w.local(a);this.prefetch=
w.prefetch(a);this.remote=w.remote(a);this.cacheKey=this.prefetch?this.prefetch.cacheKey||this.prefetch.url:null;this.index=new v({datumTokenizer:a.datumTokenizer,queryTokenizer:a.queryTokenizer});this.storage=this.cacheKey?new p(this.cacheKey):null}function c(a){function b(b){return b.sort(a)}function c(a){return a}return e.isFunction(a)?b:c}function b(){return!1}var a=d.Bloodhound;d.Bloodhound=l;l.noConflict=function(){d.Bloodhound=a;return l};l.tokenizers=q;e.mixin(l.prototype,{_loadPrefetch:function(a){function b(b){c.clear();
c.add(a.filter?a.filter(b):b);c._saveToStorage(c.index.serialize(),a.thumbprint,a.ttl)}var c=this,f;(f=this._readFromStorage(a.thumbprint))?(this.index.bootstrap(f),f=g.Deferred().resolve()):f=g.ajax(a.url,a.ajax).done(b);return f},_getFromRemote:function(a,b){var c=this;if(this.transport){a=a||"";var f=encodeURIComponent(a);a=this.remote.replace?this.remote.replace(this.remote.url,a):this.remote.url.replace(this.remote.wildcard,f);return this.transport.get(a,this.remote.ajax,function(a,f){a?b([]):
b(c.remote.filter?c.remote.filter(f):f)})}},_cancelLastRemoteRequest:function(){this.transport&&this.transport.cancel()},_saveToStorage:function(a,b,c){this.storage&&(this.storage.set("data",a,c),this.storage.set("protocol",location.protocol,c),this.storage.set("thumbprint",b,c))},_readFromStorage:function(a){if(this.storage){var b=this.storage.get("data");var c=this.storage.get("protocol");var f=this.storage.get("thumbprint")}a=f!==a||c!==location.protocol;return b&&!a?b:null},_initialize:function(){function a(){b.add(e.isFunction(c)?
c():c)}var b=this,c=this.local;var d=this.prefetch?this._loadPrefetch(this.prefetch):g.Deferred().resolve();c&&d.done(a);this.transport=this.remote?new r(this.remote):null;return this.initPromise=d.promise()},initialize:function(a){return!this.initPromise||a?this._initialize():this.initPromise},add:function(a){this.index.add(a)},get:function(a,b){function c(a){var c=d.slice(0);e.each(a,function(a){!e.some(c,function(b){return f.dupDetector(a,b)})&&c.push(a);return c.length<f.limit});b&&b(f.sorter(c))}
var f=this,d=[],k=!1;d=this.index.get(a);d=this.sorter(d).slice(0,this.limit);d.length<this.limit?k=this._getFromRemote(a,c):this._cancelLastRemoteRequest();k||(0<d.length||!this.transport)&&b&&b(d)},clear:function(){this.index.reset()},clearPrefetchCache:function(){this.storage&&this.storage.clear()},clearRemoteCache:function(){this.transport&&r.resetCache()},ttAdapter:function(){return e.bind(this.get,this)}});return l})(this);var t=function(){var d={wrapper:{position:"relative",display:"inline-block"},
hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};e.isMsie()&&
e.mixin(d.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"});e.isMsie()&&7>=e.isMsie()&&e.mixin(d.input,{marginTop:"-1px"});return d}(),x=function(){function d(d){d&&d.el||g.error("EventBus initialized without el");this.$el=g(d.el)}e.mixin(d.prototype,{trigger:function(d){var c=[].slice.call(arguments,1);this.$el.trigger("typeahead:"+d,c)}});return d}(),y=function(){function d(a,d,e,g){if(!e)return this;d=d.split(b);e=g?c(e,g):e;for(this._callbacks=
this._callbacks||{};g=d.shift();)this._callbacks[g]=this._callbacks[g]||{sync:[],async:[]},this._callbacks[g][a].push(e);return this}function e(a,b,c){return function(){for(var f,d=0,e=a.length;!f&&d<e;d+=1)f=!1===a[d].apply(b,c);return!f}}function c(a,b){return a.bind?a.bind(b):function(){a.apply(b,[].slice.call(arguments,0))}}var b=/\s+/,a=function(){return window.setImmediate?function(a){setImmediate(function(){a()})}:function(a){setTimeout(function(){a()},0)}}();return{onSync:function(a,b,c){return d.call(this,
"sync",a,b,c)},onAsync:function(a,b,c){return d.call(this,"async",a,b,c)},off:function(a){var c;if(!this._callbacks)return this;for(a=a.split(b);c=a.shift();)delete this._callbacks[c];return this},trigger:function(c){var d,f,g;if(!this._callbacks)return this;c=c.split(b);for(g=[].slice.call(arguments,1);(d=c.shift())&&(f=this._callbacks[d]);){var l=e(f.sync,this,[d].concat(g));var m=e(f.async,this,[d].concat(g));l()&&a(m)}return this}}}(),E=function(d){function g(b,a,c){for(var d=[],f=0,g=b.length;f<
g;f++)d.push(e.escapeRegExChars(b[f]));b=c?"\\b("+d.join("|")+")\\b":"("+d.join("|")+")";return a?new RegExp(b):new RegExp(b,"i")}var c={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(b){function a(b,c){for(var d,f=0;f<b.childNodes.length;f++)d=b.childNodes[f],3===d.nodeType?f+=c(d)?1:0:a(d,c)}b=e.mixin({},c,b);if(b.node&&b.pattern){b.pattern=e.isArray(b.pattern)?b.pattern:[b.pattern];var f=g(b.pattern,b.caseSensitive,b.wordsOnly);a(b.node,function(a){var c;
if(c=f.exec(a.data)){var e=d.createElement(b.tagName);b.className&&(e.className=b.className);var g=a.splitText(c.index);g.splitText(c[0].length);e.appendChild(g.cloneNode(!0));a.parentNode.replaceChild(e,g)}return!!c})}}}(window.document),D=function(){function d(a){var c=this;a=a||{};a.input||g.error("input is missing");var d=e.bind(this._onBlur,this);var m=e.bind(this._onFocus,this);var h=e.bind(this._onKeydown,this);var p=e.bind(this._onInput,this);this.$hint=g(a.hint);this.$input=g(a.input).on("blur.tt",
d).on("focus.tt",m).on("keydown.tt",h);0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=e.noop);if(e.isMsie())this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(a){b[a.which||a.keyCode]||e.defer(e.bind(c._onInput,c,a))});else this.$input.on("input.tt",p);this.query=this.$input.val();this.$overflowHelper=l(this.$input)}function l(a){return g('\x3cpre aria-hidden\x3d"true"\x3e\x3c/pre\x3e').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",
fontFamily:a.css("font-family"),fontSize:a.css("font-size"),fontStyle:a.css("font-style"),fontVariant:a.css("font-variant"),fontWeight:a.css("font-weight"),wordSpacing:a.css("word-spacing"),letterSpacing:a.css("letter-spacing"),textIndent:a.css("text-indent"),textRendering:a.css("text-rendering"),textTransform:a.css("text-transform")}).insertAfter(a)}function c(a){return a.altKey||a.ctrlKey||a.metaKey||a.shiftKey}var b={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"};d.normalizeQuery=
function(a){return(a||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")};e.mixin(d.prototype,y,{_onBlur:function(){this.resetInputValue();this.trigger("blurred")},_onFocus:function(){this.trigger("focused")},_onKeydown:function(a){var c=b[a.which||a.keyCode];this._managePreventDefault(c,a);c&&this._shouldTrigger(c,a)&&this.trigger(c+"Keyed",a)},_onInput:function(){this._checkInputValue()},_managePreventDefault:function(a,b){switch(a){case "tab":a=this.getHint();var d=this.getInputValue();a=a&&a!==d&&
!c(b);break;case "up":case "down":a=!c(b);break;default:a=!1}a&&b.preventDefault()},_shouldTrigger:function(a,b){switch(a){case "tab":a=!c(b);break;default:a=!0}return a},_checkInputValue:function(){var a=this.getInputValue();var b=this.query;var c=(b=d.normalizeQuery(a)===d.normalizeQuery(b))?this.query.length!==a.length:!1;this.query=a;b?c&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},
getQuery:function(){return this.query},setQuery:function(a){this.query=a},getInputValue:function(){return this.$input.val()},setInputValue:function(a,b){this.$input.val(a);b?this.clearHint():this._checkInputValue()},resetInputValue:function(){this.setInputValue(this.query,!0)},getHint:function(){return this.$hint.val()},setHint:function(a){this.$hint.val(a)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var a=this.getInputValue();var b=this.getHint();b=a!==b&&0===b.indexOf(a);
""!==a&&b&&!this.hasOverflow()||this.clearHint()},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function(){var a=this.$input.width()-2;this.$overflowHelper.text(this.getInputValue());return this.$overflowHelper.width()>=a},isCursorAtEnd:function(){var a=this.$input.val().length;var b=this.$input[0].selectionStart;return e.isNumber(b)?b===a:document.selection?(b=document.selection.createRange(),b.moveStart("character",-a),a===b.text.length):
!0},destroy:function(){this.$hint.off(".tt");this.$input.off(".tt");this.$hint=this.$input=this.$overflowHelper=null}});return d}(),z=function(){function d(b){b=b||{};b.templates=b.templates||{};b.source||g.error("missing source");b.name&&!/^[_a-zA-Z0-9-]+$/.test(b.name)&&g.error("invalid dataset name: "+b.name);this.query=null;this.highlight=!!b.highlight;this.name=b.name||e.getUniqueId();this.source=b.source;this.displayFn=l(b.display||b.displayKey);this.templates=c(b.templates,this.displayFn);
this.$el=g('\x3cdiv class\x3d"tt-dataset-%CLASS%"\x3e\x3c/div\x3e'.replace("%CLASS%",this.name))}function l(b){function a(a){return a[b]}b=b||"value";return e.isFunction(b)?b:a}function c(b,a){function c(b){return"\x3cp\x3e"+a(b)+"\x3c/p\x3e"}return{empty:b.empty&&e.templatify(b.empty),header:b.header&&e.templatify(b.header),footer:b.footer&&e.templatify(b.footer),suggestion:b.suggestion||c}}d.extractDatasetName=function(b){return g(b).data("ttDataset")};d.extractValue=function(b){return g(b).data("ttValue")};
d.extractDatum=function(b){return g(b).data("ttDatum")};e.mixin(d.prototype,y,{_render:function(b,a){function c(){var c=g('\x3cspan class\x3d"tt-suggestions"\x3e\x3c/span\x3e').css(t.suggestions);var d=e.map(a,function(a){a=g('\x3cdiv class\x3d"tt-suggestion"\x3e\x3c/div\x3e').append(h.templates.suggestion(a)).data("ttDataset",h.name).data("ttValue",h.displayFn(a)).data("ttDatum",a);a.children().each(function(){g(this).css(t.suggestionChild)});return a});c.append.apply(c,d);h.highlight&&E({className:"tt-highlight",
node:c[0],pattern:b});return c}function d(){return h.templates.header({query:b,isEmpty:!m})}function l(){return h.templates.footer({query:b,isEmpty:!m})}if(this.$el){var h=this;this.$el.empty();var m=a&&a.length;!m&&this.templates.empty?this.$el.html(h.templates.empty({query:b,isEmpty:!0})).prepend(h.templates.header?d():null).append(h.templates.footer?l():null):m&&this.$el.html(c()).prepend(h.templates.header?d():null).append(h.templates.footer?l():null);this.trigger("rendered")}},getRoot:function(){return this.$el},
update:function(b){var a=this;this.query=b;this.canceled=!1;this.source(b,function(c){a.canceled||b!==a.query||a._render(b,c)})},cancel:function(){this.canceled=!0},clear:function(){this.cancel();this.$el.empty();this.trigger("rendered")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=null}});return d}(),F=function(){function d(c){var b=this;c=c||{};c.menu||g.error("menu is required");this.isOpen=!1;this.isEmpty=!0;this.datasets=e.map(c.datasets,l);var a=e.bind(this._onSuggestionClick,
this);var d=e.bind(this._onSuggestionMouseEnter,this);var k=e.bind(this._onSuggestionMouseLeave,this);this.$menu=g(c.menu).on("click.tt",".tt-suggestion",a).on("mouseenter.tt",".tt-suggestion",d).on("mouseleave.tt",".tt-suggestion",k);e.each(this.datasets,function(a){b.$menu.append(a.getRoot());a.onSync("rendered",b._onRendered,b)})}function l(c){return new z(c)}e.mixin(d.prototype,y,{_onSuggestionClick:function(c){this.trigger("suggestionClicked",g(c.currentTarget))},_onSuggestionMouseEnter:function(c){this._removeCursor();
this._setCursor(g(c.currentTarget),!0)},_onSuggestionMouseLeave:function(){this._removeCursor()},_onRendered:function(){(this.isEmpty=e.every(this.datasets,function(c){return c.isEmpty()}))?this._hide():this.isOpen&&this._show();this.trigger("datasetRendered")},_hide:function(){this.$menu.hide()},_show:function(){this.$menu.css("display","block")},_getSuggestions:function(){return this.$menu.find(".tt-suggestion")},_getCursor:function(){return this.$menu.find(".tt-cursor").first()},_setCursor:function(c,
b){c.first().addClass("tt-cursor");!b&&this.trigger("cursorMoved")},_removeCursor:function(){this._getCursor().removeClass("tt-cursor")},_moveCursor:function(c){if(this.isOpen){var b=this._getCursor();var a=this._getSuggestions();this._removeCursor();c=a.index(b)+c;c=(c+1)%(a.length+1)-1;-1===c?this.trigger("cursorRemoved"):(-1>c&&(c=a.length-1),this._setCursor(a=a.eq(c)),this._ensureVisible(a))}},_ensureVisible:function(c){var b=c.position().top;c=b+c.outerHeight(!0);var a=this.$menu.scrollTop();
var d=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10);0>b?this.$menu.scrollTop(a+b):d<c&&this.$menu.scrollTop(a+(c-d))},close:function(){this.isOpen&&(this.isOpen=!1,this._removeCursor(),this._hide(),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(c){this.$menu.css("ltr"===c?t.ltr:t.rtl)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},
getDatumForSuggestion:function(c){var b=null;c.length&&(b={raw:z.extractDatum(c),value:z.extractValue(c),datasetName:z.extractDatasetName(c)});return b},getDatumForCursor:function(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function(){return this.getDatumForSuggestion(this._getSuggestions().first())},update:function(c){e.each(this.datasets,function(b){b.update(c)})},empty:function(){e.each(this.datasets,function(c){c.clear()});this.isEmpty=!0},isVisible:function(){return this.isOpen&&
!this.isEmpty},destroy:function(){this.$menu.off(".tt");this.$menu=null;e.each(this.datasets,function(c){c.destroy()})}});return d}(),C=function(){function d(a){a=a||{};a.input||g.error("missing input");this.isActivated=!1;this.autoselect=!!a.autoselect;this.minLength=e.isNumber(a.minLength)?a.minLength:1;this.$node=l(a.input,a.withHint);var b=this.$node.find(".tt-dropdown-menu");var c=this.$node.find(".tt-input");var d=this.$node.find(".tt-hint");c.on("blur.tt",function(a){var d=document.activeElement;
var f=b.is(d);d=0<b.has(d).length;e.isMsie()&&(f||d)&&(a.preventDefault(),a.stopImmediatePropagation(),e.defer(function(){c.focus()}))});b.on("mousedown.tt",function(a){a.preventDefault()});this.eventBus=a.eventBus||new x({el:c});this.dropdown=(new F({menu:b,datasets:a.datasets})).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,
this).onAsync("datasetRendered",this._onDatasetRendered,this);this.input=(new D({input:c,hint:d})).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,
this).onSync("whitespaceChanged",this._onWhitespaceChanged,this);this._setLanguageDirection()}function l(a,b){a=g(a);var d=g('\x3cspan class\x3d"twitter-typeahead"\x3e\x3c/span\x3e').css(t.wrapper);var f=g('\x3cspan class\x3d"tt-dropdown-menu"\x3e\x3c/span\x3e').css(t.dropdown);var e=a.clone().css(t.hint).css(c(a));e.val("").removeData().addClass("tt-hint").removeAttr("id name placeholder required").prop("readonly",!0).attr({autocomplete:"off",spellcheck:"false",tabindex:-1});a.data("ttAttrs",{dir:a.attr("dir"),
autocomplete:a.attr("autocomplete"),spellcheck:a.attr("spellcheck"),style:a.attr("style")});a.addClass("tt-input").attr({autocomplete:"off",spellcheck:!1}).css(b?t.input:t.inputWithNoHint);try{!a.attr("dir")&&a.attr("dir","auto")}catch(B){}return a.wrap(d).parent().prepend(b?e:null).append(f)}function c(a){return{backgroundAttachment:a.css("background-attachment"),backgroundClip:a.css("background-clip"),backgroundColor:a.css("background-color"),backgroundImage:a.css("background-image"),backgroundOrigin:a.css("background-origin"),
backgroundPosition:a.css("background-position"),backgroundRepeat:a.css("background-repeat"),backgroundSize:a.css("background-size")}}function b(a){var b=a.find(".tt-input");e.each(b.data("ttAttrs"),function(a,c){e.isUndefined(a)?b.removeAttr(c):b.attr(c,a)});b.detach().removeData("ttAttrs").removeClass("tt-input").insertAfter(a);a.remove()}e.mixin(d.prototype,{_onSuggestionClicked:function(a,b){var c;(c=this.dropdown.getDatumForSuggestion(b))&&this._select(c)},_onCursorMoved:function(){var a=this.dropdown.getDatumForCursor();
this.eventBus.trigger("cursorchanged",a.raw,a.datasetName)},_onCursorRemoved:function(){this.input.resetInputValue();this._updateHint()},_onDatasetRendered:function(){this._updateHint()},_onOpened:function(){this._updateHint();this.eventBus.trigger("opened")},_onClosed:function(){this.input.clearHint();this.eventBus.trigger("closed")},_onFocused:function(){this.isActivated=!0;this.dropdown.open()},_onBlurred:function(){this.isActivated=!1;this.dropdown.empty();this.dropdown.close()},_onEnterKeyed:function(a,
b){a=this.dropdown.getDatumForCursor();var c=this.dropdown.getDatumForTopSuggestion();a?(this._select(a),b.preventDefault()):this.autoselect&&c&&(this._select(c),b.preventDefault())},_onTabKeyed:function(a,b){(a=this.dropdown.getDatumForCursor())?(this._select(a),b.preventDefault()):this._autocomplete(!0)},_onEscKeyed:function(){this.dropdown.close();this.input.resetInputValue()},_onUpKeyed:function(){var a=this.input.getQuery();this.dropdown.isEmpty&&a.length>=this.minLength?this.dropdown.update(a):
this.dropdown.moveCursorUp();this.dropdown.open()},_onDownKeyed:function(){var a=this.input.getQuery();this.dropdown.isEmpty&&a.length>=this.minLength?this.dropdown.update(a):this.dropdown.moveCursorDown();this.dropdown.open()},_onLeftKeyed:function(){"rtl"===this.dir&&this._autocomplete()},_onRightKeyed:function(){"ltr"===this.dir&&this._autocomplete()},_onQueryChanged:function(a,b){this.input.clearHintIfInvalid();b.length>=this.minLength?this.dropdown.update(b):this.dropdown.empty();this.dropdown.open();
this._setLanguageDirection()},_onWhitespaceChanged:function(){this._updateHint();this.dropdown.open()},_setLanguageDirection:function(){var a;this.dir!==(a=this.input.getLanguageDirection())&&(this.dir=a,this.$node.css("direction",a),this.dropdown.setLanguageDirection(a))},_updateHint:function(){var a;if((a=this.dropdown.getDatumForTopSuggestion())&&this.dropdown.isVisible()&&!this.input.hasOverflow()){var b=this.input.getInputValue();var c=D.normalizeQuery(b);c=e.escapeRegExChars(c);c=new RegExp("^(?:"+
c+")(.+$)","i");(a=c.exec(a.value))?this.input.setHint(b+a[1]):this.input.clearHint()}else this.input.clearHint()},_autocomplete:function(a){var b=this.input.getHint();var c=this.input.getQuery();a=a||this.input.isCursorAtEnd();b&&c!==b&&a&&((b=this.dropdown.getDatumForTopSuggestion())&&this.input.setInputValue(b.value),this.eventBus.trigger("autocompleted",b.raw,b.datasetName))},_select:function(a){this.input.setQuery(a.value);this.input.setInputValue(a.value,!0);this._setLanguageDirection();this.eventBus.trigger("selected",
a.raw,a.datasetName);this.dropdown.close();e.defer(e.bind(this.dropdown.empty,this.dropdown))},open:function(){this.dropdown.open()},close:function(){this.dropdown.close()},setVal:function(a){a=e.toStr(a);this.isActivated?this.input.setInputValue(a):(this.input.setQuery(a),this.input.setInputValue(a,!0));this._setLanguageDirection()},getVal:function(){return this.input.getQuery()},destroy:function(){this.input.destroy();this.dropdown.destroy();b(this.$node);this.$node=null}});return d}();(function(){var d=
g.fn.typeahead;var l={initialize:function(c,b){b=e.isArray(b)?b:[].slice.call(arguments,1);c=c||{};return this.each(function(){var a=g(this);e.each(b,function(a){a.highlight=!!c.highlight});var d=new C({input:a,eventBus:new x({el:a}),withHint:e.isUndefined(c.hint)?!0:!!c.hint,minLength:c.minLength,autoselect:c.autoselect,datasets:b});a.data("ttTypeahead",d)})},open:function(){return this.each(function(){var c;(c=g(this).data("ttTypeahead"))&&c.open()})},close:function(){return this.each(function(){var c;
(c=g(this).data("ttTypeahead"))&&c.close()})},val:function(c){function b(){var a;(a=g(this).data("ttTypeahead"))&&a.setVal(c)}function a(a){if(a=a.data("ttTypeahead"))var b=a.getVal();return b}return arguments.length?this.each(b):a(this.first())},destroy:function(){return this.each(function(){var c=g(this),b;if(b=c.data("ttTypeahead"))b.destroy(),c.removeData("ttTypeahead")})}};g.fn.typeahead=function(c){if(l[c]&&"initialize"!==c){var b=this.filter(function(){return!!g(this).data("ttTypeahead")});
return l[c].apply(b,[].slice.call(arguments,1))}return l.initialize.apply(this,arguments)};g.fn.typeahead.noConflict=function(){g.fn.typeahead=d;return this}})()})(window.jQuery);
(function(){if("undefined"!=typeof window.Microsites&&window.Microsites.searchEnabled){var g=$("#searchInput"),e=$(".main-site-navigation"),q=$(".site-navigation-list"),m=$(".icon-clear-search"),p=$(".search-input-li"),r=window.Microsites||{},v=r.searchJSONEndpoint,w=r?r.searchPath||"/":"/";r=Mustache.compile($("#typeahead-header").html());w=Mustache.compile($("#typeahead-footer").html().replace("{{search-url}}",w));var t=Mustache.compile($("#typeahead-suggestion").html());v=new Bloodhound({datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.value)},
queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:v+"\x26q\x3d%QUERY"}});g.on("focus",function(){1080<Math.max(document.documentElement.clientWidth,window.innerWidth||0)?q.addClass("search-active"):$("html, body").animate({scrollTop:p.offset().top},"fast");$(this).val()&&m.show()});$(document.body).on("click",function(e){g[0]===e.target||m[0]===e.target||$(e.target).hasClass("view-all-link")||(q.removeClass("search-active"),m.hide())});g.on("keyup",function(){$(this).val()?m.show():m.hide()});
$("#search-cancel-button").on("click",function(){x.typeahead("close");e.toggleClass("menu-active");q.toggleClass("menu-active");q.toggleClass("selected");$("html, body").animate({scrollTop:0},"fast")});m.on("click",function(){g.val("");m.hide();g.focus()});v.initialize();var x=$("#searchInput").typeahead({minLength:3,hint:!1},{name:"blogs",displayKey:"title",source:v.ttAdapter(),templates:{header:r,footer:w,suggestion:t}});x.on("typeahead:selected",function(e,g){window.location.href=g.url})}})();